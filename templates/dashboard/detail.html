{% extends "base_dashboard.html" %}

{% load nvd3_tags %}
{% block graphs %}
	{% load_chart charttype1 chartdata1 chartcontainer1 extra %}
	{% load_chart charttype2 chartdata2 chartcontainer2 extra %}
	{% load_chart charttype3 chartdata3 chartcontainer3 extra %}
	{% load_chart charttype7 chartdata7 chartcontainer7 extra %}
	{% load_chart charttype8 chartdata8 chartcontainer8 extra %}
{% endblock %}

{% block table_and_graph_html %}
		<div class="row">
			<div class="col-md-6">
				<h2 style="">{{object.print_self}}  |  <a href="/dashboard/">{{object.print_container}}</a> </h2>
			</div>
			<div class="col-md-6">
				<ul class="pager">
					<li><a href="/dashboard/{{request.session.focus}}/{{previous_time.0.id}}">Previous {{request.session.focus|title}}</a></li>
					<li><a href="/dashboard/{{request.session.focus}}/{{next_time.0.id}}">Next {{request.session.focus|title}}</a></li>
				</ul>
			</div>
	</div>

	<div class="row" style = "">
		<div class="col-md-8" style="max-width: 535px;">
			<table class="table table-bordered table-condensed">
				<thead>
					<th>Metric</th>
					<th>Current {{request.session.focus|title}}</th>
					<th>Previous {{request.session.focus|title}}</th>
					<th>Change</th>
				</thead>

				<tbody>
					<tr>
						<td>Capture</td>
						<td>{{object.get_capture_rate}}</td>
						<td>{{previous_time.0.get_capture_rate}}</td>
						<td>{{ d_capture }}
					<tr>
					<tr>
						<td>Bounce</td>
						<td>{{object.get_bounce_rate}}</td>
						<td>{{previous_time.0.get_bounce_rate}}
						<td>{{ d_bounce }}</td>
					<tr>
					<tr>
						<td>Duration</td>
						<td>{{object.get_avg_duration}}</td>
						<td>{{previous_time.0.get_avg_duration}}</td>
						<td> {{ d_avg_duration }}  </td>
					<tr>
					<tr>
						<td>New Customers</td>
						<td>{{object.percent_of_new_customers|floatformat}}</td>
						<td>{{previous_time.0.percent_of_new_customers|floatformat}}</td>
						<td>{{ d_new_custom|floatformat }} secs</td>
					<tr>
				</tbody>
			</table>
		<!--
		<table class="table table-bordered table-condensed">
			<thead>
				<th>Time</th>
					<th>Walkbys</th>
					<th>Entries</th>
					<th>Bounces</th>
					<th>Capture</th>
					<th>Bounce</th>
					<th>Duration</th>

			</thead>

			<tbody>
				{% for object in object_list %}
				<tr>
					<td>{{object.describe}}</td>				
					<td>{{object.no_of_walkbys}}</td>
					<td>{{object.no_of_entries}}</td>
					<td>{{object.no_of_bounces}}</td>
					<td>{{object.get_capture_rate}}%</td>
					<td>{{object.get_bounce_rate}}%</td>
					<td>{{object.get_avg_duration}}</td>
				<tr>
				{% endfor %}
				<tr class="success">
					<td>Overall</td>				
					<td>{{object.no_of_walkbys}}</td>
					<td>{{object.no_of_entries}}</td>
					<td>{{object.no_of_bounces}}</td>
					<td>{{object.get_capture_rate}}%</td>
					<td>{{object.get_bounce_rate}}%</td>
					<td>{{object.get_avg_duration}}</td>
				<tr>
			</tbody>
		</table>
		-->
		

		<div class="row">

			<h3 class="text-center">Duration of Visit</h3>
			<div class="col-md-2 col-md-offset-1">
				{% include_container chartcontainer7 250 450 %}
			</div>
		</div>

		<div class="row">
			<div class="col-md-2 col-md-offset-1">
				{% include_container chartcontainer8 250 450 %}
			</div>
		</div>
		
		<!--
		<div class="row">
			<div class="col-md-2 col-md-offset-1">
				{% include_container chartcontainer3 500 450 %}
			</div>
		</div>
		-->
	</div>

	<div class="col-md-5">
		<div class="row">
			<div class="col-md-2 col-md-offset-1">
				<div class="svg_container">
				{% include_container chartcontainer1 300 450 %}
				</div>
			</div>
		</div>

		<div class="row">
			<div class="col-md-2 col-md-offset-1">
				<div class="svg_container">
				{% include_container chartcontainer2 300 450 %}
				</div>
			</div>
		</div>
		
	</div>
	</div>

{% endblock %}




